<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
<head>
    <title></title>
    <meta charset="utf-8">
    <meta name="viewport"
          content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="stylesheet" href="css/fonts/iconfont.css">
    <link rel="stylesheet" href="css/ui-box.css">
    <link rel="stylesheet" href="css/ui-base.css">
    <link rel="stylesheet" href="css/ui-color.css">
    <link rel="stylesheet" href="css/appcan.icon.css">
    <link rel="stylesheet" href="css/appcan.control.css">
    <link rel="stylesheet" href="css/own-common.css">
</head>
<body class="" ontouchstart>
<div id="page_0" class="bc-bg" data-control="PAGE">
    <!--header开始-->
    <div id="header" class="uh bg-color-primary ub bc-text-head" style="height: 2.75em;" data-control="HEADER">
        <!--左边-->
        <div class="nav-btn" id="nav-left">
            <div class="ub ub-img tagimg tagwh"></div>
        </div>
        <!--中间-->
        <h1 id="title" class="ut ub-f1 ulev-3 ut-s tx-c head-title"></h1>
        <!--右边-->
        <div class="nav-btn" id="nav-right">
            <i class="iconfont font-size-1-5em">&#xe6cc;</i>
        </div>
    </div>

    <!--header结束--><!--content开始-->
    <div id="content" class="ub-f1 tx-l ">

    </div>
    <!--content结束-->
</div>
<script src="js/appcan.js"></script>
<script src="js/appcan.control.js"></script>
<script src="js/language.js"></script>
</body>
<script>
    var cardParam = '';
    appcan.ready(function () {
        cardParam = appcan.getLocVal("CARD_PARAM");
        var conEle = $('#content');
        cardParam = JSON.parse(cardParam);
        $("#title").html(cardParam.name);
        var titHeight = $('#header').offset().height;
        appcan.window.openPopover(cardParam.name, '0', cardParam.url, '', 0, titHeight, conEle.offset().width, conEle.offset().height, parseInt(conEle.css("font-size")), 512, 0, cardParam.extraInfo)

        window.onorientationchange = window.onresize = function () {
            appcan.frame.resize(cardParam.name, 0, titHeight);
        };

        var rt = setTimeout(function () {
            flg = 1;
            clearTimeout(rt);
        }, 8000);

        //监听物理返回键
        uexWindow.onKeyPressed = function (keyCode) {
            backpage();
        };
        uexWindow.setReportKey('0', '1');
    });
    appcan.button("#nav-left", "btn-act", function () {
        backpage();
    });

    appcan.button("#nav-right", "btn-act", function () {
        appcan.window.close(-1);
    });

    //控制返回
    var flg = 0;
    function backpage() {
        if (flg == 0) {
            back();
            return;
        }
        //uexWindow.pageBack();通过这个方法控制页面返回，当inData=0的时候退出当前页面
        uexWindow.evaluatePopoverScript('', cardParam.name, 'uexWindow.cbPageBack = function (inOpId,inDataType,inData){if(inData == 1){uexWindow.evaluateScript("","0","back()");}};uexWindow.pageBack();');
    }

    //退出当前页面
    function back() {
        appcan.window.close(-1);
    }
</script>
</html>